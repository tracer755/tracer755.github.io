
<!DOCTYPE html>
<html lang="en">
<Head>
  <meta name="google-signin-client_id" content="529630701561-hk5ka2erbhg4ao9orhlvi1ohrjn0npc3.apps.googleusercontent.com">

  <!--MetaData tags-->
  <title>Troop 456</title>
  <link rel="icon" href="img/MainLogo.png"/>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!--End of metadata tags-->

  <!--css file start-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="css/AlertBox.css">
  <!--<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">-->
  <!--css file end-->


<style>
.alert {
  padding: 20px;
  background-color: #f44336;
  color: white;
  opacity: 1;
  transition: opacity 0.6s;
  margin-bottom: 15px;
}

.alert.success {background-color: #04AA6D;}
.alert.info {background-color: #2196F3;}
.alert.warning {background-color: #ff9800;}

.closebtn {
  margin-left: 15px;
  color: white;
  font-weight: bold;
  float: right;
  font-size: 22px;
  line-height: 20px;
  cursor: pointer;
  transition: 0.3s;
}

.closebtn:hover {
  color: black;
}
</style>

</head>
<body style="background-color: #1d1e28">
  <!--Page Header start-->
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="index.html"><img class="circle" src="img/MainLogo.png" alt="Melodica logo" width="75" height="75"></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
          <li class="nav-item">
                <a class="nav-link" href="#"><h2 style="font-family: "Lucida Console", "Courier New", monospace;">Troop 456</h2></a>
          </li>
          <li class="nav-item">
            <h2 class="nav-link" style="font-family: "Lucida Console", "Courier New", monospace;">-</h2>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><h2 style="font-family: "Lucida Console", "Courier New", monospace;">Resources</h2></a>
          </li>
          <li class="nav-item">
            <h2 class="nav-link" style="font-family: "Lucida Console", "Courier New", monospace;">-</h2>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><h2 style="font-family: "Lucida Console", "Courier New", monospace;">News</h2></a>
          </li>
          <li class="nav-item">
            <h2 class="nav-link" style="font-family: "Lucida Console", "Courier New", monospace;">-</h2>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#"><h2 style="font-family: "Lucida Console", "Courier New", monospace;">Pictures</h2></a>
          </li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <div class="g-signin2" data-onsuccess="onSignIn" id="loginButton"></div>

            <h2  id="loginNameText">N/A</h2>
          </li>
          <li class="nav-item">
            <img src="" alt="User icon" width="50" height="50" style="border-radius: 50%;" id="loginUserIcon">
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!--Page header end-->

<br><br>
<!--Login alert-->
<div class="alert success" id="alertSuccess">
  <span class="closebtn">&times;</span>
  <strong>Success!</strong> Indicates a successful or positive action.
</div>


<div class="alert warning" id="alertFail">
  <span class="closebtn">&times;</span>
  <strong>Warning!</strong> Indicates a warning that might need attention.
</div>
<p></p>

<br><br>

<center>
  <h1 style="color: #fffae8">Troop 456</h1>
  <br>
  <img src="img/MainLogo.png" width="350" height="350">
  <br><br><br><br><br>
  <h2 style="color: #fffae8">Welcome!</h2>
  <br><br><br>

</center>



<script>
window.onload = function(){

  document.getElementById("loginNameText").style.display = "none";
  document.getElementById("loginUserIcon").style.display = "none";
  document.getElementById("alertFail").style.display = "none";
  document.getElementById("alertSuccess").style.display = "none";

return;

}

function onSignIn(googleUser) {
  var profile = googleUser.getBasicProfile();



  axios.get('https://troop456loginapinodejs.herokuapp.com/email:' + profile.getEmail())
    .then(response => {
      console.log(response.data);
      if(response.data == "error"){
        console.log("Error / 404");
        document.getElementById("alertFail").style.display = "block";
        signOut();
        return;
      }
    })





  console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
  console.log('Name: ' + profile.getName());
  console.log('Image URL: ' + profile.getImageUrl());
  console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
  document.getElementById("loginButton").style.display = "none";
  document.getElementById("loginNameText").style.display = "block";
  document.getElementById("loginUserIcon").style.display = "block";
  document.getElementById("alertSuccess").style.display = "block";

  document.getElementById("loginNameText").innerHTML = profile.getName() + "";
  document.getElementById("loginUserIcon").src = profile.getImageUrl();
}

function signOut() {
    var auth2 = gapi.auth2.getAuthInstance();
    auth2.signOut().then(function () {
      console.log('User signed out.');
      document.getElementById("loginButton").style.display = "block";
      document.getElementById("loginNameText").style.display = "none";
      document.getElementById("loginUserIcon").style.display = "none";
      document.getElementById("loginNameText").innerHTML = "N/A";
      document.getElementById("loginUserIcon").src = "";
    });
  }
</script>
<script>
var close = document.getElementsByClassName("closebtn");
var i;

for (i = 0; i < close.length; i++) {
  close[i].onclick = function(){
    var div = this.parentElement;
    div.style.opacity = "0";
    setTimeout(function(){ div.style.display = "none"; }, 600);
  }
}
</script>

  <!--BootStrap Code Do not Edit-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <!--End Of bootstrap code-->
  <!--Misc Script Start-->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <!--Misc Script End-->
</body>
</html>
